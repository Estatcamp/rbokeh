<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add a "text" layer to a Bokeh figure — ly_text • rbokeh</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Add a "text" layer to a Bokeh figure — ly_text" />
<meta property="og:description" content="Add a &quot;text&quot; layer to a Bokeh figure" />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rbokeh</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/rbokeh.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/bokeh/rbokeh/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add a "text" layer to a Bokeh figure</h1>
    <small class="dont-index">Source: <a href='https://github.com/bokeh/rbokeh/blob/master/R/layer_text.R'><code>R/layer_text.R</code></a></small>
    <div class="hidden name"><code>ly_text.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Add a "text" layer to a Bokeh figure</p>
    </div>

    <pre class="usage"><span class='fu'>ly_text</span>(
  <span class='no'>fig</span>,
  <span class='no'>x</span>,
  <span class='kw'>y</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>text</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='figure_data.html'>figure_data</a></span>(<span class='no'>fig</span>),
  <span class='kw'>color</span> <span class='kw'>=</span> <span class='st'>"black"</span>,
  <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>angle</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>align</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>baseline</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>font</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>font_size</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>font_style</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>x_offset</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>y_offset</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>legend</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>lname</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>lgroup</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>fig</th>
      <td><p>figure to modify</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>x coordinates of text anchors</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>y coordinates of text anchors</p></td>
    </tr>
    <tr>
      <th>text</th>
      <td><p>text values to render</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>an optional data frame, providing the source for inputs x, y, text, and other glyph properties</p></td>
    </tr>
    <tr>
      <th>color</th>
      <td><p>text color values for the text</p></td>
    </tr>
    <tr>
      <th>alpha</th>
      <td><p>text alpha values for the text</p></td>
    </tr>
    <tr>
      <th>angle</th>
      <td><p>angle to rotate the text in radians</p></td>
    </tr>
    <tr>
      <th>align</th>
      <td><p>text align values for the text ("left", "right", "center")</p></td>
    </tr>
    <tr>
      <th>baseline</th>
      <td><p>text baseline values for the text ("top", "middle", "bottom", "alphabetic", "hanging")</p></td>
    </tr>
    <tr>
      <th>font</th>
      <td><p>text font values for the text</p></td>
    </tr>
    <tr>
      <th>font_size</th>
      <td><p>text font size values for the text</p></td>
    </tr>
    <tr>
      <th>font_style</th>
      <td><p>text font style values for the text ("normal", "italic", "bold")</p></td>
    </tr>
    <tr>
      <th>x_offset</th>
      <td><p>offset values to apply to the x-coordinates</p></td>
    </tr>
    <tr>
      <th>y_offset</th>
      <td><p>offset values to apply to the y-coordinates</p></td>
    </tr>
    <tr>
      <th>legend</th>
      <td><p>either a logical specifying not to plot a legend for this layer (FALSE) or a string indicating the name of the legend entry for this layer (note that when mapping plot attributes to variables in <code>data</code>, a legend is automatically created and does not need to be specified - see "Mapped plot attributes and legends" below)</p></td>
    </tr>
    <tr>
      <th>lname</th>
      <td><p>layer name</p></td>
    </tr>
    <tr>
      <th>lgroup</th>
      <td><p>layer group</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="mapped-plot-attributes-and-legends"><a class="anchor" href="#mapped-plot-attributes-and-legends"></a>Mapped plot attributes and legends</h2>

    <p>When specifying an input data frame for a layer through the <code>data</code> argument, columns of <code>data</code> can be used to specify various plot attributes such as <code>color</code>, etc. For example, with <code><a href='ly_points.html'>ly_points(..., data = iris, color = Species)</a></code>, the <code>Species</code> variable is used to determine how to color the points.  Here, <code>Species</code> is "mapped" to the <code>color</code> attribute.  Both continuous and categorical variables can be mapped.  In the case of continuous variables, the range is cut into slices and attributes are applied to each interval.  The mapping from the values of the variable to the actual plot attributes is determined based on the theme.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other layer functions: 
<code><a href='ly_abline.html'>ly_abline</a>()</code>,
<code><a href='ly_annular_wedge.html'>ly_annular_wedge</a>()</code>,
<code><a href='ly_annulus.html'>ly_annulus</a>()</code>,
<code><a href='ly_arc.html'>ly_arc</a>()</code>,
<code><a href='ly_bar.html'>ly_bar</a>()</code>,
<code><a href='ly_bezier.html'>ly_bezier</a>()</code>,
<code><a href='ly_boxplot.html'>ly_boxplot</a>()</code>,
<code><a href='ly_contour.html'>ly_contour</a>()</code>,
<code><a href='ly_crect.html'>ly_crect</a>()</code>,
<code><a href='ly_curve.html'>ly_curve</a>()</code>,
<code><a href='ly_density.html'>ly_density</a>()</code>,
<code><a href='ly_hist.html'>ly_hist</a>()</code>,
<code><a href='ly_image_url.html'>ly_image_url</a>()</code>,
<code><a href='ly_image.html'>ly_image</a>()</code>,
<code><a href='ly_lines.html'>ly_lines</a>()</code>,
<code><a href='ly_map.html'>ly_map</a>()</code>,
<code><a href='ly_multi_line.html'>ly_multi_line</a>()</code>,
<code><a href='ly_oval.html'>ly_oval</a>()</code>,
<code><a href='ly_patch.html'>ly_patch</a>()</code>,
<code><a href='ly_points.html'>ly_points</a>()</code>,
<code><a href='ly_polygons.html'>ly_polygons</a>()</code>,
<code><a href='ly_quadratic.html'>ly_quadratic</a>()</code>,
<code><a href='ly_quantile.html'>ly_quantile</a>()</code>,
<code><a href='ly_ray.html'>ly_ray</a>()</code>,
<code><a href='ly_rect.html'>ly_rect</a>()</code>,
<code><a href='ly_segments.html'>ly_segments</a>()</code>,
<code><a href='ly_wedge.html'>ly_wedge</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='co'># prepare data</span>
<span class='no'>elements</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span>(<span class='no'>elements</span>, !<span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span>(<span class='no'>group</span>))
<span class='no'>elements</span>$<span class='no'>group</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span>(<span class='no'>elements</span>$<span class='no'>group</span>)
<span class='no'>elements</span>$<span class='no'>period</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span>(<span class='no'>elements</span>$<span class='no'>period</span>)

<span class='co'># add colors for groups</span>
<span class='no'>metals</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"alkali metal"</span>, <span class='st'>"alkaline earth metal"</span>, <span class='st'>"halogen"</span>,
  <span class='st'>"metal"</span>, <span class='st'>"metalloid"</span>, <span class='st'>"noble gas"</span>, <span class='st'>"nonmetal"</span>, <span class='st'>"transition metal"</span>)
<span class='no'>colors</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"#a6cee3"</span>, <span class='st'>"#1f78b4"</span>, <span class='st'>"#fdbf6f"</span>, <span class='st'>"#b2df8a"</span>, <span class='st'>"#33a02c"</span>,
  <span class='st'>"#bbbb88"</span>, <span class='st'>"#baa2a6"</span>, <span class='st'>"#e08e79"</span>)
<span class='no'>elements</span>$<span class='no'>color</span> <span class='kw'>&lt;-</span> <span class='no'>colors</span>[<span class='fu'><a href='https://rdrr.io/r/base/match.html'>match</a></span>(<span class='no'>elements</span>$<span class='no'>metal</span>, <span class='no'>metals</span>)]
<span class='no'>elements</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='no'>elements</span>$<span class='no'>metal</span>

<span class='co'># make coordinates for labels</span>
<span class='no'>elements</span>$<span class='no'>symx</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span>(<span class='no'>elements</span>$<span class='no'>group</span>, <span class='st'>":0.1"</span>, <span class='kw'>sep</span> <span class='kw'>=</span> <span class='st'>""</span>)
<span class='no'>elements</span>$<span class='no'>numbery</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span>(<span class='no'>elements</span>$<span class='no'>period</span>, <span class='st'>":0.8"</span>, <span class='kw'>sep</span> <span class='kw'>=</span> <span class='st'>""</span>)
<span class='no'>elements</span>$<span class='no'>massy</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span>(<span class='no'>elements</span>$<span class='no'>period</span>, <span class='st'>":0.15"</span>, <span class='kw'>sep</span> <span class='kw'>=</span> <span class='st'>""</span>)
<span class='no'>elements</span>$<span class='no'>namey</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span>(<span class='no'>elements</span>$<span class='no'>period</span>, <span class='st'>":0.3"</span>, <span class='kw'>sep</span> <span class='kw'>=</span> <span class='st'>""</span>)

<span class='co'># create figure</span>
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='figure.html'>figure</a></span>(<span class='kw'>title</span> <span class='kw'>=</span> <span class='st'>"Periodic Table"</span>, <span class='kw'>tools</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='kw'>ylim</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>7</span>:<span class='fl'>1</span>)), <span class='kw'>xlim</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span>(<span class='fl'>1</span>:<span class='fl'>18</span>),
  <span class='kw'>xgrid</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>ygrid</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='st'>""</span>, <span class='kw'>ylab</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='kw'>height</span> <span class='kw'>=</span> <span class='fl'>600</span>, <span class='kw'>width</span> <span class='kw'>=</span> <span class='fl'>1200</span>) <span class='kw'>%&gt;%</span>

<span class='co'># plot rectangles</span>
<span class='fu'><a href='ly_crect.html'>ly_crect</a></span>(<span class='no'>group</span>, <span class='no'>period</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>elements</span>, <span class='fl'>0.9</span>, <span class='fl'>0.9</span>,
  <span class='kw'>fill_color</span> <span class='kw'>=</span> <span class='no'>color</span>, <span class='kw'>line_color</span> <span class='kw'>=</span> <span class='no'>color</span>, <span class='kw'>fill_alpha</span> <span class='kw'>=</span> <span class='fl'>0.6</span>,
  <span class='kw'>hover</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='no'>name</span>, <span class='no'>atomic.number</span>, <span class='no'>type</span>, <span class='no'>atomic.mass</span>,
    <span class='no'>electronic.configuration</span>)) <span class='kw'>%&gt;%</span>

<span class='co'># add symbol text</span>
<span class='fu'>ly_text</span>(<span class='no'>symx</span>, <span class='no'>period</span>, <span class='kw'>text</span> <span class='kw'>=</span> <span class='no'>symbol</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>elements</span>,
  <span class='kw'>font_style</span> <span class='kw'>=</span> <span class='st'>"bold"</span>, <span class='kw'>font_size</span> <span class='kw'>=</span> <span class='st'>"15pt"</span>,
  <span class='kw'>align</span> <span class='kw'>=</span> <span class='st'>"left"</span>, <span class='kw'>baseline</span> <span class='kw'>=</span> <span class='st'>"middle"</span>) <span class='kw'>%&gt;%</span>

<span class='co'># add atomic number text</span>
<span class='fu'>ly_text</span>(<span class='no'>symx</span>, <span class='no'>numbery</span>, <span class='kw'>text</span> <span class='kw'>=</span> <span class='no'>atomic.number</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>elements</span>,
  <span class='kw'>font_size</span> <span class='kw'>=</span> <span class='st'>"9pt"</span>, <span class='kw'>align</span> <span class='kw'>=</span> <span class='st'>"left"</span>, <span class='kw'>baseline</span> <span class='kw'>=</span> <span class='st'>"middle"</span>) <span class='kw'>%&gt;%</span>

<span class='co'># add name text</span>
<span class='fu'>ly_text</span>(<span class='no'>symx</span>, <span class='no'>namey</span>, <span class='kw'>text</span> <span class='kw'>=</span> <span class='no'>name</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>elements</span>,
  <span class='kw'>font_size</span> <span class='kw'>=</span> <span class='st'>"6pt"</span>, <span class='kw'>align</span> <span class='kw'>=</span> <span class='st'>"left"</span>, <span class='kw'>baseline</span> <span class='kw'>=</span> <span class='st'>"middle"</span>) <span class='kw'>%&gt;%</span>

<span class='co'># add atomic mass text</span>
<span class='fu'>ly_text</span>(<span class='no'>symx</span>, <span class='no'>massy</span>, <span class='kw'>text</span> <span class='kw'>=</span> <span class='no'>atomic.mass</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>elements</span>,
  <span class='kw'>font_size</span> <span class='kw'>=</span> <span class='st'>"6pt"</span>, <span class='kw'>align</span> <span class='kw'>=</span> <span class='st'>"left"</span>, <span class='kw'>baseline</span> <span class='kw'>=</span> <span class='st'>"middle"</span>)

<span class='no'>p</span>
<span class='co'># }</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Ryan Hafen, Continuum Analytics, Inc..</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


